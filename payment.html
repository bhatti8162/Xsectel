<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Secure Payment - SI Online Solutions</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  <script>
    // --- Service prices ---
    const servicePrices = {
      "GRC Consultancy": 250,
      "Security Consultancy": 400,
      "Infrastructure Consultancy": 350,
      "IT Strategy & Advisory": 300,
      "Compliance Audits": 280
    };

    // --- Redirect links (after successful form submission) ---
    const serviceLinks = {
      "GRC Consultancy": "https://yourdomain.com/payment/grc",
      "Security Consultancy": "https://yourdomain.com/payment/security",
      "Infrastructure Consultancy": "https://yourdomain.com/payment/infrastructure",
      "IT Strategy & Advisory": "https://yourdomain.com/payment/strategy",
      "Compliance Audits": "https://yourdomain.com/payment/audit"
    };

    // --- Update price dynamically ---
    function updatePrice() {
      const service = document.getElementById("service").value;
      document.getElementById("price").value = servicePrices[service] || "";
    }

    // --- Set min selectable date (today + 2 days) ---
    window.onload = function () {
      const dateField = document.getElementById("date");
      const today = new Date();
      today.setDate(today.getDate() + 2);
      dateField.min = today.toISOString().split("T")[0];
    };

    // --- Validate only weekdays ---
    function validateDate(event) {
      const selectedDate = new Date(event.target.value);
      const day = selectedDate.getUTCDay(); // 0 = Sunday, 6 = Saturday
      if (day === 0 || day === 6) {
        swal("Invalid Date", "Please select a working day (Monday–Friday).", "warning");
        event.target.value = "";
      }
    }

    // --- Handle Form Submission ---
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("paymentForm");
      const scriptURL = "https://formspree.io/f/xwprpbkb";

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        try {
          const formData = new FormData(form);
          await fetch(scriptURL, {
            method: "POST",
            body: formData,
            mode: "no-cors"
          });

          swal("Success", "Your request has been submitted. Redirecting to payment page...", "success");

          const service = document.getElementById("service").value;
          if (serviceLinks[service]) {
            setTimeout(() => {
              window.location.href = serviceLinks[service];
            }, 2000);
          }

          form.reset();
        } catch (error) {
          console.error("Submission Error:", error);
          swal("Error", "Something went wrong. Please try again later.", "error");
        }
      });
    });
  </script>
</head>

<body>
  <header>
    <h1>SI Online Solutions</h1>
    <p>Secure. Compliant. Future-Ready IT Consulting.</p>
  </header>

  <section id="payment">
    <h2>Secure Payment Portal</h2>

    <form id="paymentForm" class="payment-form" method="post">
      <input type="hidden" name="sid" value="YOUR_SELLER_ID">
      <input type="hidden" name="mode" value="2CO">

      <label for="service">Choose a Service:</label>
      <select name="li_0_name" id="service" onchange="updatePrice()" required>
        <option value="">-- Select a Service --</option>
        <option value="GRC Consultancy">GRC Consultancy</option>
        <option value="Security Consultancy">Security Consultancy</option>
        <option value="Infrastructure Consultancy">Infrastructure Consultancy</option>
        <option value="IT Strategy & Advisory">IT Strategy & Advisory</option>
        <option value="Compliance Audits">Compliance Audits</option>
      </select>

      <label for="price">Price (USD):</label>
      <input type="number" name="li_0_price" id="price" readonly required>

      <label for="email">Your Email:</label>
      <input type="email" name="customer_email" id="email" placeholder="you@example.com" required>

      <label for="date">Preferred Consultation Date:</label>
      <input type="date" name="consult_date" id="date" onchange="validateDate(event)" required>

      <button type="submit" class="btn">Proceed to Payment</button>
    </form>

    <div class="refund-note" style="text-align:center; margin-top:20px;">
      <p><strong>Refund Policy:</strong> All consultancy fees are <em>non-refundable</em>. By proceeding with payment, you agree to this policy.</p>
    </div>

    <div style="text-align:center; margin-top:20px;">
      <a href="index.html" style="text-decoration:none;">⬅ Back to Home</a>
    </div>
  </section>

  <section id="contact">
    <h2>Contact Us</h2>
    <div class="contact">
      <p>Email: <a href="mailto:sionlinesolutions2025@gmail.com">sionlinesolutions2025@gmail.com</a></p>
      <p>Address: Plot #__, Street #__, Sector B, Kashmir Colony</p>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 SI Online Solutions. All rights reserved.</p>
  </footer>
</body>

</html>
